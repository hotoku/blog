---
layout: post
title: html5 css3 写経
date: 2024-07-09 15:40:51 +0900
categories: blog
tags: html css
---

[この本](https://www.amazon.co.jp/dp/B0176GNY26)の写経をした際のメモ。

## part 1

- vscodeに[live server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)という拡張がある。名前のとおり、live reloadしてくれるサーバーをサクッと建てられる。
- 要素を横並びにするには`float: left`, `float: right`を指定
  - `float`を指定した要素の親に高さを伝えるためにclearfixというテクニックがある
- `box-sizing: border-box`: 要素の`width`や`height`が、どこまでを指すか。デフォルトではcontentのみ。paddingとborderを含めた方が直感的
- 文書の構造を、キチンとhtmlに反映させる
  - 見た目・デザイン上、セクションが必要ない場合も、h2, h3要素はhtmlに入れておく。見せたくない場合はcssで不可視にする
  - 要素の順番にも気を配る。ex. 日付情報は見た目では上にあるけど意味的には本文の下に来るべき、など
    - 親要素が`position: relative`で子要素が`position: absolute`なら、親要素からの座標を絶対値で指定できる。これを使って、兄要素をpaddingで少し間隔を開けたところに描画すれば、上に表示したい要素の位置を調整できる
    - 親要素に`position: relatve`が指定されていないと、`position: absolute`の基準が画面の左上になる
- `background: url("...")`で、背景に画像を指定できる`repeat-x`で横方向に繰り返し
- `letter-spacing: 1px`で、文字の間に1px挿入される。大見出しとか日付とか読む文章ではないところに使うとアクセントになる
- `max-height: ...; overflow-y: auto`とすると、最大の高さまでは縦に伸び、それ以上の場合はスクロールするようになる
- `box-shadow`で要素に影を付けられる
- ポインタがある要素を目立たせる方法
  - `:hover`に、`opacity: 0.8`を指定（ちょっと薄くなる）
  - `:hover`で、背景色を少し変える
  - `:hover`で、アンダーラインを付ける
  - `transition: opacity 0.15s`などとして、変化する時間を少しだけ確保すると、反応が心地よくなる（指定なしだと急に変わってせわしない）
- ↓の指定で、はみ出す場合は`...`表示になる

```css
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
```

- ↓の指定で、要素の横に縦棒を作れる

```css
  margin: 15px 0;
  padding-left: 8px;
  border-left: 5px solid #d03c56;
```

- セレクタの意味
  - `ul li`は`ul`の子孫の`li`
  - `ul > li`は`ul`の直接の子供の`li`
    - ulがネストしているときに、子孫の`li`を選択すると、すべての`li`が選ばれてしまうが、子の`li`だと1階層目だけを選べる
  - `li + li`は`li`の兄弟で次の`li`
    - 2番目以降だけを選べるので、`margin-top`を指定すると、リストの中だけ間隔を空けることができる
    - htmlのタグの間に改行があると（フォーマッタが勝手に入れちゃう場合がほとんど）、ブラウザで表示した際に、単語の切れ目とみなされてスペースが挿入されてしまう。この隙間を埋めるために、`font-size: 0`を指定すると隙間が詰まる。しかし、子要素に`font-size`が引き継がれてしまうので、子要素を持つ場合は、`font-size`を指定しなおす必要がある。`親要素 > *`で選択した中で`font-size`を設定し直せばよい
- `cursor: pointer`で、その要素にマウスポインタがあるときに表示が指になる

**まとめと感想**

part 1は、固定幅の画面でのスタイリングと理解。CSSは、あらゆることが手続き的なのだなと思った（要素を中央に寄せる、という指示ではなく、左右のmarginを自動で決める、と指定するなど）。結果、Xを実現したい場合にはYというパターンを使う、というようなイディオム・ノウハウの塊になっているように思う。世の中に、そういうノウハウを紹介するサイトが多い理由が分かった。

CSSのクラス名には名前空間がないのでネーミングの管理が大変というのは知っていたが、part 1の例では、各パーツごとにパーツ全体を囲む`div`要素を導入した上で適当なクラスを付与し、CSSで要素を選択する際に、そのクラスの子孫要素に対してスタイルを選択することで解決していると思った。例 `.body .item`と`.side .item`で異なるスタイルを当てるとか。

ネストが深くならないなら、これで十分な気がする。一方で、ネストが深くなると、`.item`という名前が複数階層で出現するような場合に困ることがあるかもしれない。

要素の幅やmargin, paddingはほとど絶対値で指定している。少し調整しようと思ったらすべての値を整合的に修正する必要があるが、これは骨が折れそうだと思った。[mdn](https://developer.mozilla.org/ja/docs/Web/CSS/Using_CSS_custom_properties)によると変数も使えるみたいだ。

## part 2

- `html`要素で`font-size: 62.5%`を指定するのが定石
  - remを10pxにしとくと、相対指定をしたときに実際のサイズが分かりやすくて便利（120%=12px）など
  - 主要なブラウザのデフォルトフォントサイズが16px。62.5%を指定すると、10pxになる
    - デフォルトからの相対値で指定しているので、ユーザーが個別にサイズを変えているときも比例的に変わる
- 全要素で`box-sizing: border-bos`を指定→paddingまでがボックスの大きさになる
- `a`要素のデフォルトの装飾（下線）も消しておき、全体で色を統一する
- `::before`や`::after`擬似要素に関わるものを表示させるには、`content`の指定が必要。`content: ""`を設定すれば、要素自身は空っぽだけどborderなどを表示することができる
- `::before`や`::after`擬似要素は、その要素の隣ではなく、直下の最初 or 最後に置かれる ex: `a::after`とすると、`a`要素の子要素の一番最後に擬似要素が挿入される。

**まとめと感想**

今回も、固定幅のデザインなので各種サイズは絶対値で指定。クリッカブルな要素にhoverしたときのアイデアがいくつかあった:

- 透明度を上げて、ちょっと明るく見えるようにする
- 要素を回転させる
- 影を付けて浮き上がる感じにする
- 下線が伸びて表示される

アクションが可能な要素に触れたときに、何かしら反応があると「それっぽい」感じになるので重要度は高い。また、基本が分かれば、CSSでこれらのアニメーションを実現するのは、そこまで大変ではないことが分かった。

### part 3

- `background: fixed`で、スクロールしたときに背景画像が動かないようにできる
  - `background-size: cover`で、要素いっぱいに背景画像を合わせる
- `background`に画像を置いて、それに合わせたフォント色を使う場合は、背景色として似た色を置いておくと、万が一画像を読めなかった場合でも読みづらくなくなる可能性がたかい
- `display: table`を使って、複数の要素を横に並べることができる

**まとめと感想**

なんとなく、画面の大きさが変わったら、全要素がそれに比例して拡大・縮小するようなイメージを持っていたが、そうではないんだな。同じディスプレイで少しウィンドウの幅を広げたり縮めたりする程度の変化であれば、文字のサイズや要素間の隙間などは固定値の方が見やすい。n分割にしている要素の幅のみがこういった比較的小さな変化に対しては追随している方が自然。

レスポンシブなデザインは、すごい頑張って色んな場所で条件分岐をするような作業を想像していたけどそういうわけではなかった。メディアクエリの中で一部の値を変更するだけで、わりと簡単にスマホ用のデザインに変わっていったのに驚いた。例えば、`display: table`を`display: block`に変えるだけで横並びが縦並びになったりとか。

ただし、これは元のHTML/CSSで、あとでレスポンシブにすることを前提に組んでいたからだろう。逆に言うと、自分でレスポンシブなCSSを書こうと思ったら、最初から意識して書かなければならず、なかなかハードルが高い。
